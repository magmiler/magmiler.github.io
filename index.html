<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
<link rel="stylesheet" type="text/css" href="public/style.css"/>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<div id='app'>
  <div class='filters'>
    <div class='search'>
      <input type="text" class="race-search" id="raceSearch" onkeyup="raceSearch()" autocomplete="off" placeholder="Search for races..." style="background-image: url(<%= asset_path 'searchicon.png' %>);">
    </div>
    <div class="month-filter">
      <button class="dropbtn">Month <i class="fa fa-caret-down" aria-hidden="true"></i></button>
      <div class="month-dropdown-content">
        <month-component v-for="month in months" :month="month" @click.native="update_month(month)">
      </div>
    </div>
    <div class="location-filter">
      <button class="dropbtn">Location <i class="fa fa-caret-down" aria-hidden="true"></i></button>
      <div class="dropdown-content">
        <location-component v-for="location in locations" :location="location" @click.native="update_location(location)">
      </div>
    </div>
    <div class="distance-filter">
      <button class="dropbtn">Distance <i class="fa fa-caret-down" aria-hidden="true"></i></button>
      <div class="dropdown-content">
        <distance-component v-for="distance in distances" :distance="distance" @click.native="update_distance(distance)">
      </div>
    </div>
  </div>
  <race-component v-for="race in races" :race="race" @click.native="window.open(race.Link);" v-if="(location === 'All' && month === 'All' && distance === 'All') || (race.Location === location && race.Month === month && distance === 'All') || (location === 'All' && race.Month === month && distance === 'All') || (race.Location === location && month === 'All' && distance === 'All') || (location === 'All' && month === 'All' && race.Distance.indexOf(distance) !== -1) || (race.Location === location && race.Month === month && race.Distance.indexOf(distance) !== -1) || (location === 'All' && race.Month === month && race.Distance.indexOf(distance) !== -1) || (race.Location === location && month === 'All' && race.Distance.indexOf(distance) !== -1) || (location === 'All' && month === 'All' && race.Distance.indexOf(distance) !== -1)"/>
</div>

<script src="public/pages.js"></script>
